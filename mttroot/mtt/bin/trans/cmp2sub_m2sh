#! /bin/sh

     ###################################### 
     ##### Model Transformation Tools #####
     ######################################

# Bourne shell script: cmp2sub_m2sh

# Copyright (c) P.J.Gawthrop 1996.

###############################################################
## Version control history
###############################################################
## $Id$
## $Log$
## Revision 1.2  1996/10/20 19:22:41  peterg
## Cleans up after itself.
##
## Revision 1.1  1996/10/20 19:19:50  peterg
## Initial revision
##
###############################################################


#Inform user
echo Creating $1_sub.sh

echo '# Commands to generate subsystems'>  $1_sub.sh
echo "# File $1_sub.sh"			>> $1_sub.sh
echo "# Generated by MTT on `date`."	>> $1_sub.sh
echo					>> $1_sub.sh

# Get a list of all components for the _cmp file
awk '/comp_type = / {print substr($3,2,length($3)-3)}' $1_cmp.m |\
sort -u > mtt_tmp1

# Get a list of all simple components
ls $MTTPATH/comp/simple |\
  awk '/_cause.m/{split($1,a,"_");print(a[1])}' |\
  sed  's/^zero$/0/' |\
  sed  's/^one$/1/' |\
  sort -u >mtt_tmp2

# Print the non-standard components
comm mtt_tmp1 mtt_tmp2 |\
  awk 'BEGIN{FS="\t"}{if (length($1)>0) print "mtt -q", $1, "abg m"}' \
  >>$1_sub.sh

# Clean up mtt_tmp files
rm -f mtt_tmp1 mtt_tmp2








