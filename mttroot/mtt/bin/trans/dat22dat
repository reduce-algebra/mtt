#! /bin/sh

     ###################################### 
     ##### Model Transformation Tools #####
     ######################################

# Bourne shell script: dat22dat
# Splits the data file into output and state bits

# Copyright (c) P.J.Gawthrop 1999

###############################################################
## Version control history
###############################################################
## $Id$
## $Log$
## Revision 1.5  1999/03/15 22:42:52  peterg
## Strip comments (put in by Octave save function)
##
## Revision 1.4  1999/03/15 21:55:36  peterg
## Does away with the # symbol in the file - uses _de to get Nx Ny
## instead
##
###############################################################


# Find Nx and Ny
Nx=`grep "MTTNx " <$1_def.r | awk '{print $3}' | sed 's/;//'`
Ny=`grep "MTTNy " <$1_def.r | awk '{print $3}' | sed 's/;//'`

case $2 in
    odeso)
	First=1; let Last=$First+$Ny
	;;
    odes)
	let First=$Ny+2; let Last=$First+$Nx
	;;
    *)
	First=1; let Last=$Ny+1
        ;;
esac

echo Creating $1_$2.dat

awk '{
  if (index($1,"#") != 1){
    for (i=First;i<=Last;i++)
	printf("%s ", $i);
    printf("\n"); 
  }
}' First=$First Last=$Last <$1_odes.dat2  > $1_$2.dat

