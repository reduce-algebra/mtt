#! /bin/sh

     ###################################### 
     ##### Model Transformation Tools #####
     ######################################

# Bourne shell script: struc2input_txt2txt
# Creates the deafault numerical parameters file for the system (txt)

# Copyright (c) P.J.Gawthrop 1997

###############################################################
## Version control history
###############################################################
## $Id$
## $Log$
# Revision 1.1  1997/05/03  14:55:17  peterg
# Initial revision
#
###############################################################

#Look for a command line argument
# By default, don't look for BG switches

switches=no
while [ -n "`echo $1 | grep '-'`" ]; do
  case $1 in
	-s )
		switches=yes ;;
	*)
		echo "$1 is an invalid argument - ignoring" ;;
  esac
  shift
done

# Inform user
echo Creating $1_input.txt

#Create the input file complete with headers.
echo "# Numerical parameter file ($1_input.txt)" > $1_input.txt
echo "# Generated by MTT at `date`" >> $1_input.txt
cat $MTTPATH/trans/rcs_header.txt  >> $1_input.txt

#Write out the defaults -- inputs
  echo "# Set the inputs"  >> $1_input.txt
awk '{i++; if($1=="input") print  "u(" i ") =\t1.0; \# " $3 " (Default value)"}' $1_struc.txt >> $1_input.txt


#Set some switches
if [ "$switches" = "yes" ]; then
  echo  >> $1_input.txt
  echo "# Set the switches"  >> $1_input.txt
  awk '{print  tolower($1) "= (t>=0);"}'< $1_switch.txt   >> $1_input.txt
fi



